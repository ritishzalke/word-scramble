import{r as y,R as I}from"./react-99067adc.js";function _(i,e,t){let[l,s]=y.useState(i||e),n=y.useRef(i!==void 0),r=i!==void 0;y.useEffect(()=>{let c=n.current;c!==r&&console.warn(`WARN: A component changed from ${c?"controlled":"uncontrolled"} to ${r?"controlled":"uncontrolled"}.`),n.current=r},[r]);let u=r?i:l,a=y.useCallback((c,...d)=>{let o=(h,...m)=>{t&&(Object.is(u,h)||t(h,...m)),r||(u=h)};typeof c=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),s((m,...g)=>{let $=c(r?u:m,...g);return o($,...d),r?m:$})):(r||s(c),o(c,...d))},[r,u,t]);return[u,a]}function Ce(i,e=-1/0,t=1/0){return Math.min(Math.max(i,e),t)}function O(i,e,t,l){e=Number(e),t=Number(t);let s=(i-(isNaN(e)?0:e))%l,n=Math.abs(s)*2>=l?i+Math.sign(s)*(l-Math.abs(s)):i-s;isNaN(e)?!isNaN(t)&&n>t&&(n=Math.floor(t/l)*l):n<e?n=e:!isNaN(t)&&n>t&&(n=e+Math.floor((t-e)/l)*l);let r=l.toString(),u=r.indexOf("."),a=u>=0?r.length-u:0;if(a>0){let c=Math.pow(10,a);n=Math.round(n*c)/c}return n}class Ve{build(e,t){return this.context=t,ee(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:l}=e;if(typeof t=="function"){if(!l)throw new Error("props.children was a function but props.items is missing");for(let s of e.items)yield*this.getFullNode({value:s},{renderer:t})}else{let s=[];I.Children.forEach(t,r=>{s.push(r)});let n=0;for(let r of s){let u=this.getFullNode({element:r,index:n},{});for(let a of u)n++,yield a}}}getKey(e,t,l,s){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${s}${t.key}`;let n=t.value;if(n!=null){var r;let u=(r=n.key)!==null&&r!==void 0?r:n.id;if(u==null)throw new Error("No key found for item");return u}return s?`${s}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,l,s){let n=e.element;if(!n&&e.value&&t&&t.renderer){let a=this.cache.get(e.value);if(a&&(!a.shouldInvalidate||!a.shouldInvalidate(this.context))){a.index=e.index,a.parentKey=s?s.key:null,yield a;return}n=t.renderer(e.value)}if(I.isValidElement(n)){let a=n.type;if(typeof a!="function"&&typeof a.getCollectionNode!="function"){let h=typeof n.type=="function"?n.type.name:n.type;throw new Error(`Unknown element <${h}> in collection.`)}let c=a.getCollectionNode(n.props,this.context),d=e.index,o=c.next();for(;!o.done&&o.value;){let h=o.value;e.index=d;let m=h.key;m||(m=h.element?null:this.getKey(n,e,t,l));let $=[...this.getFullNode({...h,key:m,index:d,wrapper:ke(e.wrapper,h.wrapper)},this.getChildState(t,h),l?`${l}${n.key}`:n.key,s)];for(let b of $){if(b.value=h.value||e.value,b.value&&this.cache.set(b.value,b),e.type&&b.type!==e.type)throw new Error(`Unsupported type <${H(b.type)}> in <${H(s.type)}>. Only <${H(e.type)}> is supported.`);d++,yield b}o=c.next($)}return}if(e.key==null)return;let r=this,u={type:e.type,props:e.props,key:e.key,parentKey:s?s.key:null,value:e.value,level:s?s.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:ee(function*(){if(!e.hasChildNodes)return;let a=0;for(let c of e.childNodes()){c.key!=null&&(c.key=`${u.key}${c.key}`),c.index=a;let d=r.getFullNode(c,r.getChildState(t,c),u.key,u);for(let o of d)a++,yield o}})};yield u}constructor(){this.cache=new WeakMap}}function ee(i){let e=[],t=null;return{*[Symbol.iterator](){for(let l of e)yield l;t||(t=i());for(let l of t)e.push(l),yield l}}}function ke(i,e){if(i&&e)return t=>i(e(t));if(i)return i;if(e)return e}function H(i){return i[0].toUpperCase()+i.slice(1)}function Ee(i,e,t){let l=y.useMemo(()=>new Ve,[]),{children:s,items:n,collection:r}=i;return y.useMemo(()=>{if(r)return r;let a=l.build({children:s,items:n},t);return e(a)},[l,s,n,r,t,e])}function q(i,e){return typeof e.getChildren=="function"?e.getChildren(i.key):i.childNodes}function Q(i){return Ie(i,0)}function Ie(i,e){if(e<0)return;let t=0;for(let l of i){if(t===e)return l;t++}}function ue(i){let e;for(let t of i)e=t;return e}function Y(i,e,t){if(e.parentKey===t.parentKey)return e.index-t.index;let l=[...te(i,e),e],s=[...te(i,t),t],n=l.slice(0,s.length).findIndex((r,u)=>r!==s[u]);return n!==-1?(e=l[n],t=s[n],e.index-t.index):l.findIndex(r=>r===t)>=0?1:(s.findIndex(r=>r===e)>=0,-1)}function te(i,e){let t=[];for(;(e==null?void 0:e.parentKey)!=null;)e=i.getItem(e.parentKey),t.unshift(e);return t}class K extends Set{constructor(e,t,l){super(e),e instanceof K?(this.anchorKey=t||e.anchorKey,this.currentKey=l||e.currentKey):(this.anchorKey=t,this.currentKey=l)}}function Te(i,e){if(i.size!==e.size)return!1;for(let t of i)if(!e.has(t))return!1;return!0}function De(i){let{selectionMode:e="none",disallowEmptySelection:t,allowDuplicateSelectionEvents:l,selectionBehavior:s="toggle",disabledBehavior:n="all"}=i,r=y.useRef(!1),[,u]=y.useState(!1),a=y.useRef(null),c=y.useRef(null),[,d]=y.useState(null),o=y.useMemo(()=>le(i.selectedKeys),[i.selectedKeys]),h=y.useMemo(()=>le(i.defaultSelectedKeys,new K),[i.defaultSelectedKeys]),[m,g]=_(o,h,i.onSelectionChange),$=y.useMemo(()=>i.disabledKeys?new Set(i.disabledKeys):new Set,[i.disabledKeys]),[b,M]=y.useState(s);s==="replace"&&b==="toggle"&&typeof m=="object"&&m.size===0&&M("replace");let C=y.useRef(s);return y.useEffect(()=>{s!==C.current&&(M(s),C.current=s)},[s]),{selectionMode:e,disallowEmptySelection:t,selectionBehavior:b,setSelectionBehavior:M,get isFocused(){return r.current},setFocused(p){r.current=p,u(p)},get focusedKey(){return a.current},get childFocusStrategy(){return c.current},setFocusedKey(p,x="first"){a.current=p,c.current=x,d(p)},selectedKeys:m,setSelectedKeys(p){(l||!Te(p,m))&&g(p)},disabledKeys:$,disabledBehavior:n}}function le(i,e){return i?i==="all"?"all":new K(i):e}class Ne{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){return this.state.selectionMode==="none"?!1:(e=this.getKey(e),this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e))}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(l=>t.has(l)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!e||l&&Y(this.collection,l,e)<0)&&(e=l)}return e==null?void 0:e.key}get lastSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!e||l&&Y(this.collection,l,e)>0)&&(e=l)}return e==null?void 0:e.key}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}e=this.getKey(e);let t;if(this.state.selectedKeys==="all")t=new K([e],e,e);else{let l=this.state.selectedKeys,s=l.anchorKey||e;t=new K(l,s,e);for(let n of this.getKeyRange(s,l.currentKey||e))t.delete(n);for(let n of this.getKeyRange(e,s))this.canSelectItem(n)&&t.add(n)}this.state.setSelectedKeys(t)}getKeyRange(e,t){let l=this.collection.getItem(e),s=this.collection.getItem(t);return l&&s?Y(this.collection,l,s)<=0?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){let l=[],s=e;for(;s;){let n=this.collection.getItem(s);if((n&&n.type==="item"||n.type==="cell"&&this.allowsCellSelection)&&l.push(s),s===t)return l;s=this.collection.getKeyAfter(s)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type==="cell"&&this.allowsCellSelection)return e;for(;t.type!=="item"&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!=="item"?null:t.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}if(e=this.getKey(e),e==null)return;let t=new K(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);t.has(e)?t.delete(e):this.canSelectItem(e)&&(t.add(e),t.anchorKey=e,t.currentKey=e),!(this.disallowEmptySelection&&t.size===0)&&this.state.setSelectedKeys(t)}replaceSelection(e){if(this.selectionMode==="none"||(e=this.getKey(e),e==null))return;let t=this.canSelectItem(e)?new K([e],e,e):new K;this.state.setSelectedKeys(t)}setSelectedKeys(e){if(this.selectionMode==="none")return;let t=new K;for(let l of e)if(l=this.getKey(l),l!=null&&(t.add(l),this.selectionMode==="single"))break;this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=l=>{for(;l;){if(this.canSelectItem(l)){let s=this.collection.getItem(l);s.type==="item"&&e.push(l),s.hasChildNodes&&(this.allowsCellSelection||s.type!=="item")&&t(Q(q(s,this.collection)).key)}l=this.collection.getKeyAfter(l)}};return t(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new K)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||t&&(t.pointerType==="touch"||t.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let l of e)if(!t.has(l))return!1;for(let l of t)if(!e.has(l))return!1;return!0}canSelectItem(e){if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let t=this.collection.getItem(e);return!(!t||t.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){return this.state.disabledKeys.has(e)&&this.state.disabledBehavior==="all"}isLink(e){var t,l;return!!(!((l=this.collection.getItem(e))===null||l===void 0||(t=l.props)===null||t===void 0)&&t.href)}constructor(e,t,l){this.collection=e,this.state=t;var s;this.allowsCellSelection=(s=l==null?void 0:l.allowsCellSelection)!==null&&s!==void 0?s:!1,this._isSelectAll=null}}const de={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},he={...de,customError:!0,valid:!1},R={isInvalid:!1,validationDetails:de,validationErrors:[]},Re=y.createContext({}),ie="__formValidationState"+Date.now();function Ge(i){if(i[ie]){let{realtimeValidation:e,displayValidation:t,updateValidation:l,resetValidation:s,commitValidation:n}=i[ie];return{realtimeValidation:e,displayValidation:t,updateValidation:l,resetValidation:s,commitValidation:n}}return Ae(i)}function Ae(i){let{isInvalid:e,validationState:t,name:l,value:s,builtinValidation:n,validate:r,validationBehavior:u="aria"}=i;t&&(e||(e=t==="invalid"));let a=e?{isInvalid:!0,validationErrors:[],validationDetails:he}:null,c=y.useMemo(()=>ne(Fe(r,s)),[r,s]);n!=null&&n.validationDetails.valid&&(n=null);let d=y.useContext(Re),o=y.useMemo(()=>l?Array.isArray(l)?l.flatMap(v=>W(d[v])):W(d[l]):[],[d,l]),[h,m]=y.useState(d),[g,$]=y.useState(!1);d!==h&&(m(d),$(!1));let b=y.useMemo(()=>ne(g?[]:o),[g,o]),M=y.useRef(R),[C,p]=y.useState(R),x=y.useRef(R),L=()=>{if(!z)return;T(!1);let v=c||n||M.current;X(v,x.current)||(x.current=v,p(v))},[z,T]=y.useState(!1);return y.useEffect(L),{realtimeValidation:a||b||c||n||R,displayValidation:u==="native"?a||b||C:a||b||c||n||C,updateValidation(v){u==="aria"&&!X(C,v)?p(v):M.current=v},resetValidation(){let v=R;X(v,x.current)||(x.current=v,p(v)),u==="native"&&T(!1),$(!0)},commitValidation(){u==="native"&&T(!0),$(!0)}}}function W(i){return i?Array.isArray(i)?i:[i]:[]}function Fe(i,e){if(typeof i=="function"){let t=i(e);if(t&&typeof t!="boolean")return W(t)}return[]}function ne(i){return i.length?{isInvalid:!0,validationErrors:i,validationDetails:he}:null}function X(i,e){return i===e?!0:i&&e&&i.isInvalid===e.isInvalid&&i.validationErrors.length===e.validationErrors.length&&i.validationErrors.every((t,l)=>t===e.validationErrors[l])&&Object.entries(i.validationDetails).every(([t,l])=>e.validationDetails[t]===l)}function Qe(i={}){let{isReadOnly:e}=i,[t,l]=_(i.isSelected,i.defaultSelected||!1,i.onChange);function s(r){e||l(r)}function n(){e||l(!t)}return{isSelected:t,setSelected:s,toggle:n}}function Be(i){let[e,t]=_(i.isOpen,i.defaultOpen||!1,i.onOpenChange);const l=y.useCallback(()=>{t(!0)},[t]),s=y.useCallback(()=>{t(!1)},[t]),n=y.useCallback(()=>{t(!e)},[t,e]);return{isOpen:e,setOpen:t,open:l,close:s,toggle:n}}const Oe=1500,se=500;let k={},_e=0,A=!1,S=null,E=null;function Je(i={}){let{delay:e=Oe,closeDelay:t=se}=i,{isOpen:l,open:s,close:n}=Be(i),r=y.useMemo(()=>`${++_e}`,[]),u=y.useRef(),a=()=>{k[r]=o},c=()=>{for(let m in k)m!==r&&(k[m](!0),delete k[m])},d=()=>{clearTimeout(u.current),u.current=null,c(),a(),A=!0,s(),S&&(clearTimeout(S),S=null),E&&(clearTimeout(E),E=null)},o=m=>{m||t<=0?(clearTimeout(u.current),u.current=null,n()):u.current||(u.current=setTimeout(()=>{u.current=null,n()},t)),S&&(clearTimeout(S),S=null),A&&(E&&clearTimeout(E),E=setTimeout(()=>{delete k[r],E=null,A=!1},Math.max(se,t)))},h=()=>{c(),a(),!l&&!S&&!A?S=setTimeout(()=>{S=null,A=!0,d()},e):l||d()};return y.useEffect(()=>()=>{clearTimeout(u.current),k[r]&&delete k[r]},[r]),{isOpen:l,open:m=>{!m&&e>0&&!u.current?h():d()},close:o}}class N{copy(){return new N(this.x,this.y)}equals(e){return this.x===e.x&&this.y===e.y}isOrigin(){return this.x===0&&this.y===0}constructor(e=0,t=0){this.x=e,this.y=t}}class F{get maxX(){return this.x+this.width}get maxY(){return this.y+this.height}get area(){return this.width*this.height}get topLeft(){return new N(this.x,this.y)}get topRight(){return new N(this.maxX,this.y)}get bottomLeft(){return new N(this.x,this.maxY)}get bottomRight(){return new N(this.maxX,this.maxY)}intersects(e){return this.x<=e.x+e.width&&e.x<=this.x+this.width&&this.y<=e.y+e.height&&e.y<=this.y+this.height}containsRect(e){return this.x<=e.x&&this.y<=e.y&&this.maxX>=e.maxX&&this.maxY>=e.maxY}containsPoint(e){return this.x<=e.x&&this.y<=e.y&&this.maxX>=e.x&&this.maxY>=e.y}getCornerInRect(e){for(let t of["topLeft","topRight","bottomLeft","bottomRight"])if(e.containsPoint(this[t]))return t;return null}equals(e){return e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height}pointEquals(e){return this.x===e.x&&this.y===e.y}sizeEquals(e){return this.width===e.width&&this.height===e.height}union(e){let t=Math.min(this.x,e.x),l=Math.min(this.y,e.y),s=Math.max(this.maxX,e.maxX)-t,n=Math.max(this.maxY,e.maxY)-l;return new F(t,l,s,n)}intersection(e){if(!this.intersects(e))return new F(0,0,0,0);let t=Math.max(this.x,e.x),l=Math.max(this.y,e.y);return new F(t,l,Math.min(this.maxX,e.maxX)-t,Math.min(this.maxY,e.maxY)-l)}copy(){return new F(this.x,this.y,this.width,this.height)}constructor(e=0,t=0,l=0,s=0){this.x=e,this.y=t,this.width=l,this.height=s}}let D=typeof window<"u"?window.performance:null,re=D&&(D.now||D.webkitNow||D.msNow||D.mozNow);re&&re.bind(D);let Le=!1;function Ze(){return Le}function ze(i){let{collection:e,focusMode:t}=i,l=De(i),s=y.useMemo(()=>i.disabledKeys?new Set(i.disabledKeys):new Set,[i.disabledKeys]),n=l.setFocusedKey;l.setFocusedKey=(a,c)=>{if(t==="cell"&&a!=null){let h=e.getItem(a);if((h==null?void 0:h.type)==="item"){var d,o;let m=q(h,e);c==="last"?a=(d=ue(m))===null||d===void 0?void 0:d.key:a=(o=Q(m))===null||o===void 0?void 0:o.key}}n(a,c)};let r=y.useMemo(()=>new Ne(e,l),[e,l]);const u=y.useRef(null);return y.useEffect(()=>{if(l.focusedKey!=null&&!e.getItem(l.focusedKey)){const a=u.current.getItem(l.focusedKey),c=a.parentKey!=null&&(a.type==="cell"||a.type==="rowheader"||a.type==="column")?u.current.getItem(a.parentKey):a,d=u.current.rows,o=e.rows,h=d.length-o.length;let m=Math.min(h>1?Math.max(c.index-h+1,0):c.index,o.length-1),g;for(;m>=0;){if(!r.isDisabled(o[m].key)&&o[m].type!=="headerrow"){g=o[m];break}m<o.length-1?m++:(m>c.index&&(m=c.index),m--)}if(g){const $=g.hasChildNodes?[...q(g,e)]:[],b=g.hasChildNodes&&c!==a&&a.index<$.length?$[a.index].key:g.key;l.setFocusedKey(b)}else l.setFocusedKey(null)}u.current=e},[e,r,l,l.focusedKey]),{collection:e,disabledKeys:s,isKeyboardNavigationDisabled:!1,selectionManager:r}}class Pe{*[Symbol.iterator](){yield*[...this.rows]}get size(){return[...this.rows].length}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let t=this.keyMap.get(e);return t?t.prevKey:null}getKeyAfter(e){let t=this.keyMap.get(e);return t?t.nextKey:null}getFirstKey(){var e;return(e=[...this.rows][0])===null||e===void 0?void 0:e.key}getLastKey(){var e;let t=[...this.rows];return(e=t[t.length-1])===null||e===void 0?void 0:e.key}getItem(e){return this.keyMap.get(e)}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}getChildren(e){let t=this.keyMap.get(e);return(t==null?void 0:t.childNodes)||[]}constructor(e){this.keyMap=new Map,this.keyMap=new Map,this.columnCount=e==null?void 0:e.columnCount,this.rows=[];let t=n=>{let r=this.keyMap.get(n.key);e.visitNode&&(n=e.visitNode(n)),this.keyMap.set(n.key,n);let u=new Set,a;for(let c of n.childNodes)c.type==="cell"&&c.parentKey==null&&(c.parentKey=n.key),u.add(c.key),a?(a.nextKey=c.key,c.prevKey=a.key):c.prevKey=null,t(c),a=c;if(a&&(a.nextKey=null),r)for(let c of r.childNodes)u.has(c.key)||l(c)},l=n=>{this.keyMap.delete(n.key);for(let r of n.childNodes)this.keyMap.get(r.key)===r&&l(r)},s;e.items.forEach((n,r)=>{let u={level:0,key:"row-"+r,type:"row",value:void 0,hasChildNodes:!0,childNodes:[...n.childNodes],rendered:void 0,textValue:void 0,...n};s?(s.nextKey=u.key,u.prevKey=s.key):u.prevKey=null,this.rows.push(u),t(u),s=u}),s&&(s.nextKey=null)}}const fe="row-header-column-"+Math.random().toString(36).slice(2);let j="row-header-column-"+Math.random().toString(36).slice(2);for(;fe===j;)j="row-header-column-"+Math.random().toString(36).slice(2);function Ue(i,e){if(e.length===0)return[];let t=[],l=new Map;for(let a of e){let c=a.parentKey,d=[a];for(;c;){let o=i.get(c);if(!o)break;if(l.has(o)){o.colspan++;let{column:h,index:m}=l.get(o);if(m>d.length)break;for(let g=m;g<d.length;g++)h.splice(g,0,null);for(let g=d.length;g<h.length;g++)h[g]&&l.has(h[g])&&(l.get(h[g]).index=g)}else o.colspan=1,d.push(o),l.set(o,{column:d,index:d.length-1});c=o.parentKey}t.push(d),a.index=t.length-1}let s=Math.max(...t.map(a=>a.length)),n=Array(s).fill(0).map(()=>[]),r=0;for(let a of t){let c=s-1;for(let d of a){if(d){let o=n[c],h=o.reduce((m,g)=>m+g.colspan,0);if(h<r){let m={type:"placeholder",key:"placeholder-"+d.key,colspan:r-h,index:h,value:null,rendered:null,level:c,hasChildNodes:!1,childNodes:[],textValue:null};o.length>0&&(o[o.length-1].nextKey=m.key,m.prevKey=o[o.length-1].key),o.push(m)}o.length>0&&(o[o.length-1].nextKey=d.key,d.prevKey=o[o.length-1].key),d.level=c,d.colIndex=r,o.push(d)}c--}r++}let u=0;for(let a of n){let c=a.reduce((d,o)=>d+o.colspan,0);if(c<e.length){let d={type:"placeholder",key:"placeholder-"+a[a.length-1].key,colspan:e.length-c,index:c,value:null,rendered:null,level:u,hasChildNodes:!1,childNodes:[],textValue:null,prevKey:a[a.length-1].key};a.push(d)}u++}return n.map((a,c)=>({type:"headerrow",key:"headerrow-"+c,index:c,value:null,rendered:null,level:0,hasChildNodes:!0,childNodes:a,textValue:null}))}class He extends Pe{*[Symbol.iterator](){yield*this.body.childNodes}get size(){return this._size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let t=this.keyMap.get(e);return t?t.prevKey:null}getKeyAfter(e){let t=this.keyMap.get(e);return t?t.nextKey:null}getFirstKey(){var e;return(e=Q(this.body.childNodes))===null||e===void 0?void 0:e.key}getLastKey(){var e;return(e=ue(this.body.childNodes))===null||e===void 0?void 0:e.key}getItem(e){return this.keyMap.get(e)}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}getTextValue(e){let t=this.getItem(e);if(!t)return"";if(t.textValue)return t.textValue;let l=this.rowHeaderColumnKeys;if(l){let s=[];for(let n of t.childNodes){let r=this.columns[n.index];if(l.has(r.key)&&n.textValue&&s.push(n.textValue),s.length===l.size)break}return s.join(" ")}return""}constructor(e,t,l){let s=new Set,n,r=[];if(l!=null&&l.showSelectionCheckboxes){let o={type:"column",key:fe,value:null,textValue:"",level:0,index:l!=null&&l.showDragButtons?1:0,hasChildNodes:!1,rendered:null,childNodes:[],props:{isSelectionCell:!0}};r.unshift(o)}if(l!=null&&l.showDragButtons){let o={type:"column",key:j,value:null,textValue:"",level:0,index:0,hasChildNodes:!1,rendered:null,childNodes:[],props:{isDragButtonCell:!0}};r.unshift(o)}let u=[],a=new Map,c=o=>{switch(o.type){case"body":n=o;break;case"column":a.set(o.key,o),o.hasChildNodes||(r.push(o),o.props.isRowHeader&&s.add(o.key));break;case"item":u.push(o);return}for(let h of o.childNodes)c(h)};for(let o of e)c(o);let d=Ue(a,r);d.forEach((o,h)=>u.splice(h,0,o)),super({columnCount:r.length,items:u,visitNode:o=>(o.column=r[o.index],o)}),this._size=0,this.columns=r,this.rowHeaderColumnKeys=s,this.body=n,this.headerRows=d,this._size=[...n.childNodes].length,this.rowHeaderColumnKeys.size===0&&(l!=null&&l.showSelectionCheckboxes?l!=null&&l.showDragButtons?this.rowHeaderColumnKeys.add(this.columns[2].key):this.rowHeaderColumnKeys.add(this.columns[1].key):this.rowHeaderColumnKeys.add(this.columns[0].key))}}const Ye={ascending:"descending",descending:"ascending"};function et(i){let[e,t]=y.useState(!1),{selectionMode:l="none",showSelectionCheckboxes:s,showDragButtons:n}=i,r=y.useMemo(()=>({showSelectionCheckboxes:s&&l!=="none",showDragButtons:n,selectionMode:l,columns:[]}),[i.children,s,l,n]),u=Ee(i,y.useCallback(d=>new He(d,null,r),[r]),r),{disabledKeys:a,selectionManager:c}=ze({...i,collection:u,disabledBehavior:i.disabledBehavior||"selection"});return{collection:u,disabledKeys:a,selectionManager:c,showSelectionCheckboxes:i.showSelectionCheckboxes||!1,sortDescriptor:i.sortDescriptor,isKeyboardNavigationDisabled:u.size===0||e,setKeyboardNavigationDisabled:t,sort(d,o){var h;i.onSortChange({column:d,direction:o??(((h=i.sortDescriptor)===null||h===void 0?void 0:h.column)===d?Ye[i.sortDescriptor.direction]:"ascending")})}}}function ye(i){return null}ye.getCollectionNode=function*(e,t){let{children:l,columns:s}=e;if(t.columns=[],typeof l=="function"){if(!s)throw new Error("props.children was a function but props.columns is missing");for(let n of s)yield{type:"column",value:n,renderer:l}}else{let n=[];I.Children.forEach(l,r=>{n.push({type:"column",element:r})}),yield*n}};let tt=ye;function me(i){return null}me.getCollectionNode=function*(e){let{children:t,items:l}=e;yield{type:"body",hasChildNodes:!0,props:e,*childNodes(){if(typeof t=="function"){if(!l)throw new Error("props.children was a function but props.items is missing");for(let s of l)yield{type:"item",value:s,renderer:t}}else{let s=[];I.Children.forEach(t,n=>{s.push({type:"item",element:n})}),yield*s}}}};let lt=me;function ge(i){return null}ge.getCollectionNode=function*(e,t){let{title:l,children:s,childColumns:n}=e,r=l||s,u=e.textValue||(typeof r=="string"?r:"")||e["aria-label"],a=yield{type:"column",hasChildNodes:!!n||l&&I.Children.count(s)>0,rendered:r,textValue:u,props:e,*childNodes(){if(n)for(let d of n)yield{type:"column",value:d};else if(l){let d=[];I.Children.forEach(s,o=>{d.push({type:"column",element:o})}),yield*d}},shouldInvalidate(d){return c(d),!1}},c=d=>{for(let o of a)o.hasChildNodes||d.columns.push(o)};c(t)};let it=ge;function G(i){return null}G.getCollectionNode=function*(e,t){let{children:l,textValue:s,UNSTABLE_childItems:n}=e;yield{type:"item",props:e,textValue:s,"aria-label":e["aria-label"],hasChildNodes:!0,*childNodes(){if(t.showDragButtons&&(yield{type:"cell",key:"header-drag",props:{isDragButtonCell:!0}}),t.showSelectionCheckboxes&&t.selectionMode!=="none"&&(yield{type:"cell",key:"header",props:{isSelectionCell:!0}}),typeof l=="function"){for(let r of t.columns)yield{type:"cell",element:l(r.key),key:r.key};if(n)for(let r of n)yield{type:"item",value:r}}else{let r=[],u=[];if(I.Children.forEach(l,a=>{if(a.type===G){if(r.length<t.columns.length)throw new Error("All of a Row's child Cells must be positioned before any child Rows.");u.push({type:"item",element:a})}else r.push({type:"cell",element:a})}),r.length!==t.columns.length)throw new Error(`Cell count must match column count. Found ${r.length} cells and ${t.columns.length} columns.`);yield*r,yield*u}},shouldInvalidate(r){return r.columns.length!==t.columns.length||r.columns.some((u,a)=>u.key!==t.columns[a].key)||r.showSelectionCheckboxes!==t.showSelectionCheckboxes||r.showDragButtons!==t.showDragButtons||r.selectionMode!==t.selectionMode}}};let nt=G;function be(i){return null}be.getCollectionNode=function*(e){let{children:t}=e,l=e.textValue||(typeof t=="string"?t:"")||e["aria-label"]||"";yield{type:"cell",props:e,rendered:t,textValue:l,"aria-label":e["aria-label"],hasChildNodes:!1}};let st=be;const Xe=0,qe=100,We=1;function rt(i){const{isDisabled:e=!1,minValue:t=Xe,maxValue:l=qe,numberFormatter:s,step:n=We,orientation:r="horizontal"}=i;let u=y.useMemo(()=>{let f=(l-t)/10;return f=O(f,0,f+n,n),Math.max(f,n)},[n,l,t]),a=y.useMemo(()=>ae(i.value),[i.value]),c=y.useMemo(()=>{var f;return(f=ae(i.defaultValue))!==null&&f!==void 0?f:[t]},[i.defaultValue,t]),d=ce(i.value,i.defaultValue,i.onChange),o=ce(i.value,i.defaultValue,i.onChangeEnd);const[h,m]=_(a,c,d),[g,$]=y.useState(new Array(h.length).fill(!1)),b=y.useRef(new Array(h.length).fill(!0)),[M,C]=y.useState(void 0),p=y.useRef(h),x=y.useRef(g);let L=f=>{p.current=f,m(f)},z=f=>{x.current=f,$(f)};function T(f){return(f-t)/(l-t)}function P(f){return f===0?t:h[f-1]}function U(f){return f===h.length-1?l:h[f+1]}function v(f){return b.current[f]}function ve(f,w){b.current[f]=w}function B(f,w){if(e||!v(f))return;const V=P(f),Se=U(f);w=O(w,V,Se,n);let Me=oe(p.current,f,w);L(Me)}function $e(f,w){if(e||!v(f))return;const V=x.current[f];x.current=oe(x.current,f,w),z(x.current),o&&V&&!x.current.some(Boolean)&&o(p.current)}function J(f){return s.format(f)}function pe(f,w){B(f,Z(w))}function we(f){return Math.round((f-t)/n)*n+t}function Z(f){const w=f*(l-t)+t;return Ce(we(w),t,l)}function xe(f,w=1){let V=Math.max(w,n);B(f,O(h[f]+V,t,l,n))}function Ke(f,w=1){let V=Math.max(w,n);B(f,O(h[f]-V,t,l,n))}return{values:h,getThumbValue:f=>h[f],setThumbValue:B,setThumbPercent:pe,isThumbDragging:f=>g[f],setThumbDragging:$e,focusedThumb:M,setFocusedThumb:C,getThumbPercent:f=>T(h[f]),getValuePercent:T,getThumbValueLabel:f=>J(h[f]),getFormattedValue:J,getThumbMinValue:P,getThumbMaxValue:U,getPercentValue:Z,isThumbEditable:v,setThumbEditable:ve,incrementThumb:xe,decrementThumb:Ke,step:n,pageSize:u,orientation:r,isDisabled:e}}function oe(i,e,t){return i[e]===t?i:[...i.slice(0,e),t,...i.slice(e+1)]}function ae(i){if(i!=null)return Array.isArray(i)?i:[i]}function ce(i,e,t){return l=>{typeof i=="number"||typeof e=="number"?t==null||t(l[0]):t==null||t(l)}}export{Qe as $,Je as a,_ as b,et as c,nt as d,lt as e,st as f,it as g,tt as h,rt as i,Ce as j,Ge as k,R as l,ie as m,Ie as n,q as o,ue as p,Q as q,F as r,Ze as s};
